/*!
 * Part of RPG Maker MV CoreScript
 * @link https://github.com/thinknathan/corescript/blob/master/CONTRIBUTORS.md
 * @license https://github.com/thinknathan/corescript/blob/master/LICENSE 
 */
"use strict";(()=>{var lt=Object.defineProperty;var f=(r,t)=>lt(r,"name",{value:t,configurable:!0});var k=Uint8Array,P=Uint16Array,fr=Uint32Array,lr=new k([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),cr=new k([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cr=new k([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Vr=f(function(r,t){for(var e=new P(31),n=0;n<31;++n)e[n]=t+=1<<r[n-1];for(var a=new fr(e[30]),n=1;n<30;++n)for(var s=e[n];s<e[n+1];++s)a[s]=s-e[n]<<5|n;return[e,a]},"freb"),Yr=Vr(lr,2),$r=Yr[0],Mr=Yr[1];$r[28]=258,Mr[258]=28;var qr=Vr(cr,0),ct=qr[0],Kr=qr[1],Tr=new P(32768);for(p=0;p<32768;++p)Y=(p&43690)>>>1|(p&21845)<<1,Y=(Y&52428)>>>2|(Y&13107)<<2,Y=(Y&61680)>>>4|(Y&3855)<<4,Tr[p]=((Y&65280)>>>8|(Y&255)<<8)>>>1;var Y,p,V=f(function(r,t,e){for(var n=r.length,a=0,s=new P(t);a<n;++a)r[a]&&++s[r[a]-1];var l=new P(t);for(a=0;a<t;++a)l[a]=l[a-1]+s[a-1]<<1;var c;if(e){c=new P(1<<t);var u=15-t;for(a=0;a<n;++a)if(r[a])for(var o=a<<4|r[a],i=t-r[a],g=l[r[a]-1]++<<i,v=g|(1<<i)-1;g<=v;++g)c[Tr[g]>>>u]=o}else for(c=new P(n),a=0;a<n;++a)r[a]&&(c[a]=Tr[l[r[a]-1]++]>>>15-r[a]);return c},"hMap"),J=new k(288);for(p=0;p<144;++p)J[p]=8;var p;for(p=144;p<256;++p)J[p]=9;var p;for(p=256;p<280;++p)J[p]=7;var p;for(p=280;p<288;++p)J[p]=8;var p,sr=new k(32);for(p=0;p<32;++p)sr[p]=5;var p,ht=V(J,9,0),vt=V(J,9,1),pt=V(sr,5,0),gt=V(sr,5,1),kr=f(function(r){for(var t=r[0],e=1;e<r.length;++e)r[e]>t&&(t=r[e]);return t},"max"),H=f(function(r,t,e){var n=t/8|0;return(r[n]|r[n+1]<<8)>>(t&7)&e},"bits"),Sr=f(function(r,t){var e=t/8|0;return(r[e]|r[e+1]<<8|r[e+2]<<16)>>(t&7)},"bits16"),Pr=f(function(r){return(r+7)/8|0},"shft"),hr=f(function(r,t,e){(t==null||t<0)&&(t=0),(e==null||e>r.length)&&(e=r.length);var n=new(r.BYTES_PER_ELEMENT==2?P:r.BYTES_PER_ELEMENT==4?fr:k)(e-t);return n.set(r.subarray(t,e)),n},"slc");var yt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],q=f(function(r,t,e){var n=new Error(t||yt[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,q),!e)throw n;return n},"err"),mt=f(function(r,t,e){var n=r.length;if(!n||e&&e.f&&!e.l)return t||new k(0);var a=!t||e,s=!e||e.i;e||(e={}),t||(t=new k(n*3));var l=f(function(ur){var ar=t.length;if(ur>ar){var tr=new k(Math.max(ar*2,ur));tr.set(t),t=tr}},"cbuf"),c=e.f||0,u=e.p||0,o=e.b||0,i=e.l,g=e.d,v=e.m,y=e.n,M=n*8;do{if(!i){c=H(r,u,1);var z=H(r,u+1,3);if(u+=3,z)if(z==1)i=vt,g=gt,v=9,y=5;else if(z==2){var K=H(r,u,31)+257,Z=H(r,u+10,15)+4,L=K+H(r,u+5,31)+1;u+=14;for(var E=new k(L),w=new k(19),h=0;h<Z;++h)w[Cr[h]]=H(r,u+h*3,7);u+=Z*3;for(var W=kr(w),U=(1<<W)-1,rr=V(w,W,1),h=0;h<L;){var S=rr[H(r,u,U)];u+=S&15;var m=S>>>4;if(m<16)E[h++]=m;else{var I=0,A=0;for(m==16?(A=3+H(r,u,3),u+=2,I=E[h-1]):m==17?(A=3+H(r,u,7),u+=3):m==18&&(A=11+H(r,u,127),u+=7);A--;)E[h++]=I}}var D=E.subarray(0,K),x=E.subarray(K);v=kr(D),y=kr(x),i=V(D,v,1),g=V(x,y,1)}else q(1);else{var m=Pr(u)+4,R=r[m-4]|r[m-3]<<8,T=m+R;if(T>n){s&&q(0);break}a&&l(o+R),t.set(r.subarray(m,T),o),e.b=o+=R,e.p=u=T*8,e.f=c;continue}if(u>M){s&&q(0);break}}a&&l(o+131072);for(var d=(1<<v)-1,O=(1<<y)-1,G=u;;G=u){var I=i[Sr(r,u)&d],b=I>>>4;if(u+=I&15,u>M){s&&q(0);break}if(I||q(2),b<256)t[o++]=b;else if(b==256){G=u,i=null;break}else{var B=b-254;if(b>264){var h=b-257,N=lr[h];B=H(r,u,(1<<N)-1)+$r[h],u+=N}var j=g[Sr(r,u)&O],F=j>>>4;j||q(3),u+=j&15;var x=ct[F];if(F>3){var N=cr[F];x+=Sr(r,u)&(1<<N)-1,u+=N}if(u>M){s&&q(0);break}a&&l(o+131072);for(var C=o+B;o<C;o+=4)t[o]=t[o-x],t[o+1]=t[o+1-x],t[o+2]=t[o+2-x],t[o+3]=t[o+3-x];o=C}}e.l=i,e.p=G,e.b=o,e.f=c,i&&(c=1,e.m=v,e.d=g,e.n=y)}while(!c);return o==t.length?t:hr(t,0,o)},"inflt"),$=f(function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>>8},"wbits"),ir=f(function(r,t,e){e<<=t&7;var n=t/8|0;r[n]|=e,r[n+1]|=e>>>8,r[n+2]|=e>>>16},"wbits16"),Ar=f(function(r,t){for(var e=[],n=0;n<r.length;++n)r[n]&&e.push({s:n,f:r[n]});var a=e.length,s=e.slice();if(!a)return[Lr,0];if(a==1){var l=new k(e[0].s+1);return l[e[0].s]=1,[l,1]}e.sort(function(L,E){return L.f-E.f}),e.push({s:-1,f:25001});var c=e[0],u=e[1],o=0,i=1,g=2;for(e[0]={s:-1,f:c.f+u.f,l:c,r:u};i!=a-1;)c=e[e[o].f<e[g].f?o++:g++],u=e[o!=i&&e[o].f<e[g].f?o++:g++],e[i++]={s:-1,f:c.f+u.f,l:c,r:u};for(var v=s[0].s,n=1;n<a;++n)s[n].s>v&&(v=s[n].s);var y=new P(v+1),M=Ur(e[i-1],y,0);if(M>t){var n=0,z=0,m=M-t,R=1<<m;for(s.sort(function(E,w){return y[w.s]-y[E.s]||E.f-w.f});n<a;++n){var T=s[n].s;if(y[T]>t)z+=R-(1<<M-y[T]),y[T]=t;else break}for(z>>>=m;z>0;){var K=s[n].s;y[K]<t?z-=1<<t-y[K]++-1:++n}for(;n>=0&&z;--n){var Z=s[n].s;y[Z]==t&&(--y[Z],++z)}M=t}return[new k(y),M]},"hTree"),Ur=f(function(r,t,e){return r.s==-1?Math.max(Ur(r.l,t,e+1),Ur(r.r,t,e+1)):t[r.s]=e},"ln"),Wr=f(function(r){for(var t=r.length;t&&!r[--t];);for(var e=new P(++t),n=0,a=r[0],s=1,l=f(function(u){e[n++]=u},"w"),c=1;c<=t;++c)if(r[c]==a&&c!=t)++s;else{if(!a&&s>2){for(;s>138;s-=138)l(32754);s>2&&(l(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(l(a),--s;s>6;s-=6)l(8304);s>2&&(l(s-3<<5|8208),s=0)}for(;s--;)l(a);s=1,a=r[c]}return[e.subarray(0,n),t]},"lc"),or=f(function(r,t){for(var e=0,n=0;n<t.length;++n)e+=r[n]*t[n];return e},"clen"),Dr=f(function(r,t,e){var n=e.length,a=Pr(t+2);r[a]=n&255,r[a+1]=n>>>8,r[a+2]=r[a]^255,r[a+3]=r[a+1]^255;for(var s=0;s<n;++s)r[a+s+4]=e[s];return(a+4+n)*8},"wfblk"),br=f(function(r,t,e,n,a,s,l,c,u,o,i){$(t,i++,e),++a[256];for(var g=Ar(a,15),v=g[0],y=g[1],M=Ar(s,15),z=M[0],m=M[1],R=Wr(v),T=R[0],K=R[1],Z=Wr(z),L=Z[0],E=Z[1],w=new P(19),h=0;h<T.length;++h)w[T[h]&31]++;for(var h=0;h<L.length;++h)w[L[h]&31]++;for(var W=Ar(w,7),U=W[0],rr=W[1],S=19;S>4&&!U[Cr[S-1]];--S);var I=o+5<<3,A=or(a,J)+or(s,sr)+l,D=or(a,v)+or(s,z)+l+14+3*S+or(w,U)+(2*w[16]+3*w[17]+7*w[18]);if(I<=A&&I<=D)return Dr(t,i,r.subarray(u,u+o));var x,d,O,G;if($(t,i,1+(D<A)),i+=2,D<A){x=V(v,y,0),d=v,O=V(z,m,0),G=z;var b=V(U,rr,0);$(t,i,K-257),$(t,i+5,E-1),$(t,i+10,S-4),i+=14;for(var h=0;h<S;++h)$(t,i+3*h,U[Cr[h]]);i+=3*S;for(var B=[T,L],N=0;N<2;++N)for(var j=B[N],h=0;h<j.length;++h){var F=j[h]&31;$(t,i,b[F]),i+=U[F],F>15&&($(t,i,j[h]>>>5&127),i+=j[h]>>>12)}}else x=ht,d=J,O=pt,G=sr;for(var h=0;h<c;++h)if(n[h]>255){var F=n[h]>>>18&31;ir(t,i,x[F+257]),i+=d[F+257],F>7&&($(t,i,n[h]>>>23&31),i+=lr[F]);var C=n[h]&31;ir(t,i,O[C]),i+=G[C],C>3&&(ir(t,i,n[h]>>>5&8191),i+=cr[C])}else ir(t,i,x[n[h]]),i+=d[n[h]];return ir(t,i,x[256]),i+d[256]},"wblk"),wt=new fr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Lr=new k(0),xt=f(function(r,t,e,n,a,s){var l=r.length,c=new k(n+l+5*(1+Math.ceil(l/7e3))+a),u=c.subarray(n,c.length-a),o=0;if(!t||l<8)for(var i=0;i<=l;i+=65535){var g=i+65535;g>=l&&(u[o>>3]=s),o=Dr(u,o+1,r.subarray(i,g))}else{for(var v=wt[t-1],y=v>>>13,M=v&8191,z=(1<<e)-1,m=new P(32768),R=new P(z+1),T=Math.ceil(e/3),K=2*T,Z=f(function(Er){return(r[Er]^r[Er+1]<<T^r[Er+2]<<K)&z},"hsh"),L=new fr(25e3),E=new P(288),w=new P(32),h=0,W=0,i=0,U=0,rr=0,S=0;i<l;++i){var I=Z(i),A=i&32767,D=R[I];if(m[A]=D,R[I]=A,rr<=i){var x=l-i;if((h>7e3||U>24576)&&x>423){o=br(r,u,0,L,E,w,W,U,S,i-S,o),U=h=W=0,S=i;for(var d=0;d<286;++d)E[d]=0;for(var d=0;d<30;++d)w[d]=0}var O=2,G=0,b=M,B=A-D&32767;if(x>2&&I==Z(i-B))for(var N=Math.min(y,x)-1,j=Math.min(32767,i),F=Math.min(258,x);B<=j&&--b&&A!=D;){if(r[i+O]==r[i+O-B]){for(var C=0;C<F&&r[i+C]==r[i+C-B];++C);if(C>O){if(O=C,G=B,C>N)break;for(var ur=Math.min(B,C-2),ar=0,d=0;d<ur;++d){var tr=i-B+d+32768&32767,ft=m[tr],Zr=tr-ft+32768&32767;Zr>ar&&(ar=Zr,D=tr)}}}A=D,D=m[A],B+=A-D+32768&32767}if(G){L[U++]=268435456|Mr[O]<<18|Kr[G];var Nr=Mr[O]&31,Hr=Kr[G]&31;W+=lr[Nr]+cr[Hr],++E[257+Nr],++w[Hr],rr=i+O,++h}else L[U++]=r[i],++E[r[i]]}}o=br(r,u,s,L,E,w,W,U,S,i-S,o),!s&&o&7&&(o=Dr(u,o+1,Lr))}return hr(c,0,n+Pr(o)+a)},"dflt");var dt=f(function(r,t,e,n,a){return xt(r,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):12+t.mem,e,n,!a)},"dopt");function Xr(r,t){return dt(r,t||{},0,0)}f(Xr,"deflateSync");function Jr(r,t){return mt(r,t)}f(Jr,"inflateSync");var jr=typeof TextEncoder<"u"&&new TextEncoder,Fr=typeof TextDecoder<"u"&&new TextDecoder,zt=0;try{Fr.decode(Lr,{stream:!0}),zt=1}catch{}var Et=f(function(r){for(var t="",e=0;;){var n=r[e++],a=(n>127)+(n>223)+(n>239);if(e+a>r.length)return[t,hr(r,e-1)];a?a==3?(n=((n&15)<<18|(r[e++]&63)<<12|(r[e++]&63)<<6|r[e++]&63)-65536,t+=String.fromCharCode(55296|n>>10,56320|n&1023)):a&1?t+=String.fromCharCode((n&31)<<6|r[e++]&63):t+=String.fromCharCode((n&15)<<12|(r[e++]&63)<<6|r[e++]&63):t+=String.fromCharCode(n)}},"dutf8");function Qr(r,t){if(t){for(var e=new k(r.length),n=0;n<r.length;++n)e[n]=r.charCodeAt(n);return e}if(jr)return jr.encode(r);for(var a=r.length,s=new k(r.length+(r.length>>1)),l=0,c=f(function(i){s[l++]=i},"w"),n=0;n<a;++n){if(l+5>s.length){var u=new k(l+8+(a-n<<1));u.set(s),s=u}var o=r.charCodeAt(n);o<128||t?c(o):o<2048?(c(192|o>>6),c(128|o&63)):o>55295&&o<57344?(o=65536+(o&1023<<10)|r.charCodeAt(++n)&1023,c(240|o>>18),c(128|o>>12&63),c(128|o>>6&63),c(128|o&63)):(c(224|o>>12),c(128|o>>6&63),c(128|o&63))}return hr(s,0,l)}f(Qr,"strToU8");function _r(r,t){if(t){for(var e="",n=0;n<r.length;n+=16384)e+=String.fromCharCode.apply(null,r.subarray(n,n+16384));return e}else{if(Fr)return Fr.decode(r);var a=Et(r),s=a[0],l=a[1];return l.length&&q(8),s}}f(_r,"strFromU8");function er(r){return new Promise((t,e)=>{r.oncomplete=r.onsuccess=()=>t(r.result),r.onabort=r.onerror=()=>e(r.error)})}f(er,"promisifyRequest");function kt(r,t){let e=indexedDB.open(r);e.onupgradeneeded=()=>e.result.createObjectStore(t);let n=er(e);return(a,s)=>n.then(l=>s(l.transaction(t,a).objectStore(t)))}f(kt,"createStore");var Ir;function vr(){return Ir||(Ir=kt("keyval-store","keyval")),Ir}f(vr,"defaultGetStore");function pr(r,t=vr()){return t("readonly",e=>er(e.get(r)))}f(pr,"get");function Or(r,t,e=vr()){return e("readwrite",n=>(n.put(t,r),er(n.transaction)))}f(Or,"set");function rt(r,t=vr()){return t("readwrite",e=>(e.delete(r),er(e.transaction)))}f(rt,"del");function St(r,t){return r.openCursor().onsuccess=function(){this.result&&(t(this.result),this.result.continue())},er(r.transaction)}f(St,"eachCursor");function tt(r=vr()){return r("readonly",t=>{if(t.getAllKeys)return er(t.getAllKeys());let e=[];return St(t,n=>e.push(n.key)).then(()=>e)})}f(tt,"keys");var nt=Symbol("Comlink.proxy"),At=Symbol("Comlink.endpoint"),Ct=Symbol("Comlink.releaseProxy"),Br=Symbol("Comlink.finalizer"),yr=Symbol("Comlink.thrown"),at=f(r=>typeof r=="object"&&r!==null||typeof r=="function","isObject"),Mt={canHandle:r=>at(r)&&r[nt],serialize(r){let{port1:t,port2:e}=new MessageChannel;return dr(r,t),[e,[e]]},deserialize(r){return r.start(),Ft(r)}},Tt={canHandle:r=>at(r)&&yr in r,serialize({value:r}){let t;return r instanceof Error?t={isError:!0,value:{message:r.message,name:r.name,stack:r.stack}}:t={isError:!1,value:r},[t,[]]},deserialize(r){throw r.isError?Object.assign(new Error(r.value.message),r.value):r.value}},it=new Map([["proxy",Mt],["throw",Tt]]);function Ut(r,t){for(let e of r)if(t===e||e==="*"||e instanceof RegExp&&e.test(t))return!0;return!1}f(Ut,"isAllowedOrigin");function dr(r,t=globalThis,e=["*"]){t.addEventListener("message",f(function n(a){if(!a||!a.data||!Ut(e,a.origin))return;let{id:s,type:l,path:c}=Object.assign({path:[]},a.data),u=(a.data.argumentList||[]).map(_),o;try{let i=c.slice(0,-1).reduce((v,y)=>v[y],r),g=c.reduce((v,y)=>v[y],r);switch(l){case"GET":o=g;break;case"SET":i[c.slice(-1)[0]]=_(a.data.value),o=!0;break;case"APPLY":o=g.apply(i,u);break;case"CONSTRUCT":{let v=new g(...u);o=Ot(v)}break;case"ENDPOINT":{let{port1:v,port2:y}=new MessageChannel;dr(r,y),o=Rr(v,[v])}break;case"RELEASE":o=void 0;break;default:return}}catch(i){o={value:i,[yr]:0}}Promise.resolve(o).catch(i=>({value:i,[yr]:0})).then(i=>{let[g,v]=xr(i);t.postMessage(Object.assign(Object.assign({},g),{id:s}),v),l==="RELEASE"&&(t.removeEventListener("message",n),ot(t),Br in r&&typeof r[Br]=="function"&&r[Br]())}).catch(i=>{let[g,v]=xr({value:new TypeError("Unserializable return value"),[yr]:0});t.postMessage(Object.assign(Object.assign({},g),{id:s}),v)})},"callback")),t.start&&t.start()}f(dr,"expose");function Dt(r){return r.constructor.name==="MessagePort"}f(Dt,"isMessagePort");function ot(r){Dt(r)&&r.close()}f(ot,"closeEndPoint");function Ft(r,t){return Gr(r,[],t)}f(Ft,"wrap");function gr(r){if(r)throw new Error("Proxy has been released and is not useable")}f(gr,"throwIfProxyReleased");function st(r){return nr(r,{type:"RELEASE"}).then(()=>{ot(r)})}f(st,"releaseEndpoint");var mr=new WeakMap,wr="FinalizationRegistry"in globalThis&&new FinalizationRegistry(r=>{let t=(mr.get(r)||0)-1;mr.set(r,t),t===0&&st(r)});function Pt(r,t){let e=(mr.get(t)||0)+1;mr.set(t,e),wr&&wr.register(r,t,r)}f(Pt,"registerProxy");function Lt(r){wr&&wr.unregister(r)}f(Lt,"unregisterProxy");function Gr(r,t=[],e=function(){}){let n=!1,a=new Proxy(e,{get(s,l){if(gr(n),l===Ct)return()=>{Lt(a),st(r),n=!0};if(l==="then"){if(t.length===0)return{then:()=>a};let c=nr(r,{type:"GET",path:t.map(u=>u.toString())}).then(_);return c.then.bind(c)}return Gr(r,[...t,l])},set(s,l,c){gr(n);let[u,o]=xr(c);return nr(r,{type:"SET",path:[...t,l].map(i=>i.toString()),value:u},o).then(_)},apply(s,l,c){gr(n);let u=t[t.length-1];if(u===At)return nr(r,{type:"ENDPOINT"}).then(_);if(u==="bind")return Gr(r,t.slice(0,-1));let[o,i]=et(c);return nr(r,{type:"APPLY",path:t.map(g=>g.toString()),argumentList:o},i).then(_)},construct(s,l){gr(n);let[c,u]=et(l);return nr(r,{type:"CONSTRUCT",path:t.map(o=>o.toString()),argumentList:c},u).then(_)}});return Pt(a,r),a}f(Gr,"createProxy");function It(r){return Array.prototype.concat.apply([],r)}f(It,"myFlat");function et(r){let t=r.map(xr);return[t.map(e=>e[0]),It(t.map(e=>e[1]))]}f(et,"processArguments");var ut=new WeakMap;function Rr(r,t){return ut.set(r,t),r}f(Rr,"transfer");function Ot(r){return Object.assign(r,{[nt]:!0})}f(Ot,"proxy");function xr(r){for(let[t,e]of it)if(e.canHandle(r)){let[n,a]=e.serialize(r);return[{type:"HANDLER",name:t,value:n},a]}return[{type:"RAW",value:r},ut.get(r)||[]]}f(xr,"toWireValue");function _(r){switch(r.type){case"HANDLER":return it.get(r.name).deserialize(r.value);case"RAW":return r.value}}f(_,"fromWireValue");function nr(r,t,e){return new Promise(n=>{let a=Bt();r.addEventListener("message",f(function s(l){!l.data||!l.data.id||l.data.id!==a||(r.removeEventListener("message",s),n(l.data))},"l")),r.start&&r.start(),r.postMessage(Object.assign({id:a},t),e)})}f(nr,"requestResponseMessage");function Bt(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}f(Bt,"generateUUID");var Q=!0,X=class{static successCallback(){return!0}static failureCallback(t){return!1}static compress(t){if(t===null)return null;try{let e=Qr(t);return Xr(e,{level:1})}catch{return null}}static decompress(t){if(t===null)return null;try{let e=Jr(t);return _r(e)}catch{return null}}static async save(t,e){let n=this.compress(t);return await Or(e,n).then(this.successCallback).catch(this.failureCallback)}static async load(t,e){let n=await pr(e).catch(this.failureCallback);if(n){let a=this.decompress(n);if(a)return a;if(t>0){let s=await this.loadBackup(e);return await this.restoreBackup(e),s}return!1}return!1}static async saveExists(t){return await tt().then(function(e){return e.includes(t)})}static async restoreBackup(t){let e=t+"bak",n=await this.loadBackup(t);return await this.save(n,t),await rt(e).then(this.successCallback).catch(this.failureCallback)}static async backupSave(t){let e=t+"bak",n=await pr(t).catch(this.failureCallback);return n?await Or(e,n).then(this.successCallback).catch(this.failureCallback):!1}static async loadBackup(t){let e=t+"bak",n=await pr(e);return this.decompress(n)}};f(X,"WebStorageManager");var zr=class{static compress({data:t}){let e=X.compress(t);return Rr({result:e},[e.buffer])}static decompress({data:t}){return{result:X.decompress(t)}}static async makeSave({data:t,webKey:e}){return{success:await X.save(t,e)}}static async loadSave({id:t,webKey:e}){return{result:await X.load(t,e)}}static async backupSave({webKey:t}){return{success:await X.backupSave(t)}}static async checkSaveExists({webKey:t}){return{result:await X.saveExists(t)}}};f(zr,"GameStorageWorker");dr(zr);})();
/*! Bundled license information:

comlink/dist/esm/comlink.mjs:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)
*/
